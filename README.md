# SDC (SMT Dafny Compiler) [![Docker Image CI](https://github.com/m-carrasco/smt-dafny-compiler/actions/workflows/docker-image.yml/badge.svg)](https://github.com/m-carrasco/smt-dafny-compiler/actions/workflows/docker-image.yml)

SDC compiles an SMT formula into a Dafny program. The synthesized program can then be verified to reveal bugs in Dafny.

## Requirements

1. Docker
2. .NET SDK 8.0


## Visual Studio Code: Dev Container 

In this way, Visual Studio Code runs inside a container. The project is configured so that changes to the repository in the container are reflected outside.

1. Build the required Docker images: ```./ci/build-images.sh```.
2. In Visual Studio Code, click `> Dev Containers: Rebuild and Reopen in Container`.
3. Open a terminal in Visual Studio Code, now mapped to the Docker container.
4. Build the project: ```./ci/publish-self-contained.sh```.
5. Test the project: ```lit ./integration-tests -vvv```.

## Alternative Quick Setup

```bash
# Build the required Docker images.
./ci/build-images.sh

# For development or use, start a tmp container. 
# The local repository's folder is shared with the container.
./ci/tmp-container.sh

## The following commands are executed in the container.

# Build SDC so it is available for the integration tests.
./ci/publish-self-contained.sh

# Run the integration tests.
# The files generated by the tests are available in integration-tests/output.
lit ./integration-tests -vvv
```

## Code Style

Before pushing, ensure that the code is formatted correctly; otherwise, the CI will fail.

```bash
dotnet format ./src/SMTDafnyCompiler.sln
```

## Usage

```bash
TODO: For now, check the integration tests
```
